@startuml
'skinparam classAttributeIconSize 0

package AppUtils {
    class Asset {
        +string name
        +string short_name
        +string type
        +double units
        +double average_price
        +Asset ()
    }

    class Operation {
        +DateTime datetime
        +string source_asset
        +double source_qty
        +string destiny_asset
        +double destiny_qty
        +double normalized_qty
        +Operation ()
        +Operation.from_splitted_datetime_string ()
        +Operation.from_datetime_string ()
    }

    class OperationCorrupted {
        +CODE_01
    }
}

package AppWidgets {
    class SettingsMenu <<  (U,orchid) >> extends Gtk.Popover {
        +SettingsMenu ()
    }

    enum Column {
		DATETIME
	    SOURCE_ASSET
	    SOURCE_QTY
	    DESTINY_ASSET
	    DESTINY_QTY
	    NORMALIZED_QTY
    }

    class OperationsTable << (U,orchid) >> extends Gtk.Grid {
        -Array<Operation> operations
        +Gtk.Label title_label
        +Gtk.Label label
        +Gtk.TreeView view
        +OperationsTable ()
        +setup_treeview ()
        #on_changed ()
        build_source_list_item
    }

    class AssetPanel << (U,orchid) >> extends Granite.Widgets.SourceList {
        +AssetPanel ()
    }

    class HeaderBar << (U,orchid) >> extends Gtk.HeaderBar {
        +Gtk.Button new_btn
        +Gtk.Button open_btn
        +Gtk.Button save_btn
        +Gtk.Button add_asset_btn
        +Gtk.Button add_operation_btn
        +Settings settings_menu_btn
        +HeaderBar ()
    }
}

package AppViews {
    class WelcomeView << (U,orchid) >> extends Gtk.Grid {
        +WelcomeView ()
    }

    class MainView << (U,orchid) >> extends Gtk.Frame {
        -AssetPanel asset_panel
        -OperationsTable operations_table
        +MainView ()
        +update_asset_list ()
        +update_operations_table ()
    }
}

package Valoro {
    class Window << (U,orchid) >> extends Gtk.ApplicationWindow {
        -string file_path
        #Gee.ArrayList<Asset> assets
        #Gee.ArrayList<Operation> operations
        -MainView main_view
        -WelcomeView welcome_view
        -Granite.Widgets.Toast toast
        -HeaderBar header_bar
        -SettingsMenu menu
        +Window ()
        -on_new_clicked ()
        -on_open_clicked ()
        -on_save_clicked ()
        -on_add_asset_clicked ()
        -on_add_operation_clicked ()
        -on_help_clicked ()
    }

    class ValoroApp extends Gtk.Application {
        +ValoroApp ()
        #activate ()
        +{static} main
    }
}

Operation - OperationCorrupted : throws >
Window "1" *-- "many" Operation : contains >
OperationsTable - Column : uses >
MainView *-- AssetPanel : uses >
MainView *-- OperationsTable : uses >
Window "1" *-- "many" Asset : contains >
HeaderBar *-- SettingsMenu : < composes
Window *-- HeaderBar : < composes
Window *-- MainView : uses >
Window *-- WelcomeView : uses >
ValoroApp - Window : uses >

@enduml
